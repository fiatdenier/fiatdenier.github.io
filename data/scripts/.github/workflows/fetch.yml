name: Fetch Bitcoin News


on:
schedule:
- cron: '*/30 * * * *' # every 30 minutes
workflow_dispatch: # allow manual runs
push:
paths:
- 'scripts/**'
- 'package.json'
- 'package-lock.json'


permissions:
contents: write


jobs:
build:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
with:
node-version: 20
cache: 'npm'
- run: npm ci
- run: npm run fetch
- name: Commit and push data
run: |
git config --global user.name "github-actions[bot]"
git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
git add data/news.json
git commit -m "chore: update news.json" || echo "No changes"
git push
