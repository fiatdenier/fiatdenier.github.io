<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiat Denier - Lucky Roll</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --btc-orange: #f7931a; 
            --dark-bg: #1a1a1a; 
            --win-green: #4CAF50; 
            --grey-text: #696969; 
            --locked-grey: #444444;
        }
		/* # ADDED: Pulse animation for free credit events */
        @keyframes credit-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); color: var(--win-green); text-shadow: 0 0 10px var(--win-green); }
            100% { transform: scale(1); }
        }
        .pulse-active {
            animation: credit-pulse 0.6s ease-in-out;
        }

        /* # ADDED: Blink for the status message */
        @keyframes blink { 50% { opacity: 0; } }
		
		/* # ADDED: Subtle glow animation for the Progressive Jackpot */
		@keyframes jackpot-glow {
			0% { text-shadow: 0 0 5px rgba(76, 175, 80, 0.2); }
			50% { text-shadow: 0 0 15px rgba(76, 175, 80, 0.6); }
			100% { text-shadow: 0 0 5px rgba(76, 175, 80, 0.2); }
		}

		.glow-active {
			animation: jackpot-glow 3s ease-in-out infinite;
		}
		
        body { font-family: 'Courier New', monospace; background: var(--dark-bg); color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; overflow-x: hidden; }
        .card { background: #2a2a2a; padding: 2rem; border-radius: 15px; border: 2px solid var(--btc-orange); text-align: center; box-shadow: 0 0 20px rgba(247, 147, 26, 0.2); width: 90%; max-width: 400px; position: relative; }
        
        .agent-header { display: flex; align-items: center; justify-content: space-between; width: 100%; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #333; }
        .agent-info { text-align: left; }
        .agent-id-tag { font-size: 0.8rem; color: var(--btc-orange); font-weight: bold; letter-spacing: 1px; }
        .agent-status { font-size: 0.6rem; color: #666; text-transform: uppercase; }
        
        .regen-btn { cursor: pointer; font-size: 0.7rem; margin-left: 8px; color: var(--grey-text); transition: color 0.2s; vertical-align: middle; }
        .regen-btn:hover { color: var(--btc-orange); }

        .btc-logo-icon { width: 32px; height: 32px; fill: var(--btc-orange); filter: drop-shadow(0 0 5px rgba(247, 147, 26, 0.4)); }
        
        #stats-container { background: rgba(0,0,0,0.3); border: 1px solid #444; padding: 10px; border-radius: 8px; margin-bottom: 15px; }
        .stat-label { font-size: 0.65rem; color: #888; letter-spacing: 2px; margin-top: 5px; }
        .stat-value { font-size: 1.5rem; font-weight: bold; }
        #total-sats-val { color: var(--win-green); font-size: 1.1rem; }

        #slot-container { display: flex; justify-content: center; gap: 10px; margin: 1.5rem 0; font-size: 5rem; font-weight: bold; font-family: 'Roboto', sans-serif; }
        .slot { width: 70px; height: 100px; line-height: 100px; background: #111; border-radius: 8px; border: 1px solid #333; color: var(--btc-orange); }
        .rolling { animation: blur-spin 0.1s infinite; opacity: 0.7; filter: blur(2px); color: #888; }
        @keyframes blur-spin { 0% { transform: translateY(-2px); } 50% { transform: translateY(2px); } 100% { transform: translateY(0); } }
        .just-finished { color: var(--btc-orange) !important; text-shadow: 0 0 15px rgba(247, 147, 26, 0.8); transform: scale(1.05); transition: all 0.1s ease-out; }
        
        .proof-box { background: #111; padding: 1rem; border-radius: 8px; font-size: 0.75rem; text-align: left; margin-top: 1.5rem; word-break: break-all; border: 1px dashed #444; color: #aaa; }
        button { background: var(--btc-orange); border: none; padding: 1rem 2rem; font-size: 1.2rem; font-weight: bold; border-radius: 5px; cursor: pointer; width: 100%; font-family: inherit; transition: 0.2s; color: white; }
        #roll-btn.locked { background: var(--locked-grey) !important; color: var(--btc-orange) !important; cursor: not-allowed; }
        #timer { font-size: 0.85rem; color: var(--grey-text); margin-top: 10px; height: 20px; font-weight: bold; }
        .back-link { display: block; margin-bottom: 20px; color: #888; text-decoration: none; font-size: 0.8rem; }
        #ip-lock-msg { color: var(--btc-orange); font-size: 2.5rem; font-weight: bold; display: none; margin: 1rem 0; }

        #leaderboard-overlay { 
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            background: #111; border: 2px solid var(--btc-orange); padding: 20px; z-index: 10001; 
            width: 85%; max-width: 320px; box-shadow: 0 0 30px black;
        }
        #lb-scroll-area { max-height: 250px; overflow-y: auto; margin-bottom: 15px; padding-right: 5px; }
        .leaderboard-row { display: flex; justify-content: space-between; font-size: 0.8rem; padding: 8px 0; border-bottom: 1px solid #222; }
        .leaderboard-row.me { color: var(--btc-orange); font-weight: bold; border-left: 2px solid var(--btc-orange); padding-left: 5px; }
        #lb-scroll-area::-webkit-scrollbar { width: 4px; }
        #lb-scroll-area::-webkit-scrollbar-thumb { background: var(--btc-orange); }
        #my-rank-box { border-top: 1px solid var(--btc-orange); margin-top: 10px; padding-top: 10px; font-size: 0.75rem; color: #aaa; }
    </style>
</head>
<body>
    
    <div class="card">
        <a href="index.html" class="back-link">‚Üê Return to Wire</a>
        
        <div id="jackpot-container" style="background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 8px; margin-bottom: 15px; text-align: center; /*border-left: 4px solid var(--win-green)*/;">
            <div style="font-size: 0.6rem; color: #888; letter-spacing: 2px; margin-bottom: 4px;">PROGRESSIVE FREE CREDIT JACKPOT</div>
            <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                <span id="jackpot-ticker" class="glow-active" style="color: var(--win-green); font-size: 1.6rem; font-weight: bold; font-family: 'Courier New', monospace;">210.00</span>
                <span style="font-size: 0.7rem; color: #555;">ROLLS</span>
            </div>
            <div style="font-size: 0.6rem; color: #666; margin-top: 5px; border-top: 1px solid #222; padding-top: 5px;">
                DAILY FREE CREDIT REDEEMED: <span id="daily-count-display">0</span>/100
            </div>
        </div>
        
        <div class="agent-header">
            <div class="agent-info">
                <div class="agent-status">Sovereign Individual</div>
                <div style="display: flex; align-items: center;">
                    <div id="agent-id-display" class="agent-id-tag">...</div>
                    <span class="regen-btn" onclick="regenerateIdentity()" title="Regenerate Identity">üîÑ</span>
                </div>
            </div>
            <svg class="btc-logo-icon" viewBox="0 0 64 64">
                <path d="M48.2,26.5c1-6.7-4.1-10.3-11.1-12.7l2.3-9.1l-5.5-1.4l-2.2,9c-1.5-0.4-3-0.7-4.4-1.1l2.3-9.1L24,0.8l-2.3,9.1c-1.2-0.3-2.3-0.5-3.5-0.8l0,0l-7.6-1.9l-1.5,5.9c0,0,4.1,0.9,4,1c2.2,0.6,2.6,2,2.6,3.2l-2.6,10.3c0.2,0,0.4,0.