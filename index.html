<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Roll - Fiat Denier</title>
    <style>
        :root { --btc-orange: #f7931a; --dark-bg: #0a0a0a; }
        body { font-family: 'Courier New', monospace; background: var(--dark-bg); color: white; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .card { background: #111; padding: 30px; border-radius: 12px; border: 2px solid var(--btc-orange); text-align: center; width: 90%; max-width: 400px; box-shadow: 0 0 30px rgba(247,147,26,0.1); }
        #number-display { font-size: 5.5rem; font-weight: bold; color: var(--btc-orange); margin: 20px 0; }
        .winner-glow { animation: glow 1s infinite alternate; color: #4CAF50 !important; }
        @keyframes glow { from { text-shadow: 0 0 10px #4CAF50; } to { text-shadow: 0 0 30px #4CAF50; } }
        button { background: var(--btc-orange); border: none; padding: 15px; font-size: 1.2rem; font-weight: bold; border-radius: 5px; cursor: pointer; width: 100%; font-family: inherit; }
        button:disabled { background: #333; color: #666; cursor: not-allowed; }
        .proof { background: #000; padding: 15px; margin-top: 25px; font-size: 0.7rem; text-align: left; border: 1px dashed #444; word-break: break-all; color: #888; }
        .back { display: block; margin-bottom: 20px; color: #555; text-decoration: none; font-size: 0.8rem; }
    </style>
</head>
<body>
    <div class="card">
        <a href="index.html" class="back">‚Üê EXIT GAME</a>
        <h2 style="margin:0;">LUCKY ROLL</h2>
        <div id="number-display">----</div>
        <button id="roll-btn" onclick="handleRoll()">ROLL FOR SATS</button>
        <div id="timer" style="margin-top:10px; color:#555; font-size:0.8rem;"></div>

        <div id="result-area" style="display:none;">
            <div id="status-msg"></div>
            <div class="proof">
                <strong>SIG:</strong> <span id="res-sig"></span><br>
                <strong>NUM:</strong> <span id="res-num"></span>
            </div>
        </div>
    </div>

    <script>
        async function handleRoll() {
            const btn = document.getElementById('roll-btn');
            btn.disabled = true;
            btn.innerText = "VERIFYING...";

            try {
                const res = await fetch("https://api.fiatdenier.com/get-roll");
                const data = await res.json();
                
                document.getElementById('number-display').innerText = data.num;
                document.getElementById('res-sig').innerText = data.signature;
                document.getElementById('res-num').innerText = data.num;
                document.getElementById('result-area').style.display = 'block';

                const sig = String(data.signature);
                const status = document.getElementById('status-msg');
                const disp = document.getElementById('number-display');

                disp.classList.remove('winner-glow');

                if (sig.startsWith("21") && sig.endsWith("21")) {
                    status.innerHTML = "<h3 class='winner-glow'>üçÄ RARE SIG WINNER!</h3>";
                    disp.classList.add('winner-glow');
                } else if (data.num == 2121) {
                    status.innerHTML = "<h3 style='color:var(--btc-orange)'>‚ú® LUCKY WINNER!</h3>";
                } else {
                    status.innerHTML = "<h3 style='color:#444'>NO WIN. TRY AGAIN.</h3>";
                }

                startTimer(600); // 10 minute cooldown
            } catch (e) {
                alert("Connection Error. Please refresh.");
                btn.disabled = false;
                btn.innerText = "RETRY ROLL";
            }
        }

        function startTimer(duration) {
            const btn = document.getElementById('roll-btn');
            let timer = duration;
            const interval = setInterval(() => {
                let mins = Math.floor(timer / 60);
                let secs = timer % 60;
                document.getElementById('timer').innerText = `COOLDOWN: ${mins}:${secs < 10 ? '0' : ''}${secs}`;
                if (--timer < 0) {
                    clearInterval(interval);
                    document.getElementById('timer').innerText = "";
                    btn.disabled = false;
                    btn.innerText = "ROLL FOR SATS";
                }
            }, 1000);
        }
    </script>
</body>
</html>